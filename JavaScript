let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault(); // نذار مرورگر خودش نصب رو پیشنهاد بده
  deferredPrompt = e; // ذخیره کن برای بعد
  document.getElementById('installBtn').style.display = 'block'; // دکمه رو نشون بده
});

document.getElementById('installBtn').addEventListener('click', () => {
  if (deferredPrompt) {
    deferredPrompt.prompt(); // پنجره نصب رو باز کن
    deferredPrompt.userChoice.then(choiceResult => {
      if (choiceResult.outcome === 'accepted') {
        console.log('✅ نصب تأیید شد');
      } else {
        console.log('❌ نصب رد شد');
      }
      deferredPrompt = null; // پاکش کن چون دیگه استفاده شده
    });
  }
});
